!function(){"use strict";if(window.innerWidth>=768){new Masonry(".stories__items",{itemSelector:".stories-item",columnWidth:".stories-item--width",gutter:".stories-item--gap",horizontalOrder:!0,percentPosition:!0})}const e=()=>{let e,s=1,o=1,n=!1;const i=document.getElementById("survey");if(!i)return;const a=i.querySelector(".js-survey-steps"),c=i.querySelector(".js-survey-progress");e=a.querySelectorAll(".js-survey-step").length;const l=i.querySelector(".js-survey-prev"),d=i.querySelector(".js-survey-next");function p(t){const s=i.querySelector('.js-survey-step[data-step="'+t+'"]');s&&(n=t==e,a.querySelectorAll(".js-survey-step").forEach(e=>{e.classList.remove("is-active"),e.style.opacity=0}),s.classList.add("is-active"),setTimeout(()=>{s.style.opacity=1},0),o=1,c.querySelectorAll(".survey__progress-step").forEach(e=>{o<=t?e.classList.add("is-active"):e.classList.remove("is-active"),o++}))}o=1,a.querySelectorAll(".js-survey-step").forEach(e=>{e.querySelectorAll("input").forEach(e=>{e.addEventListener("change",function(){d.disabled=!1})});const t=document.createElement("div");t.classList.add("survey__progress-step"),1==o&&t.classList.add("is-active"),c.appendChild(t),o++}),l.addEventListener("click",function(e){p(--s),d.disabled=!1,1==s&&(l.style.display="none"),l.innerHTML="Шаг "+(s-1),d.innerHTML="Шаг "+(s+1)}),d.addEventListener("click",function(e){s++,n?(t("popup-test"),r("popup-survey-result-1")):p(s),l.style.display="block",d.disabled=!0,l.innerHTML="Шаг "+(s-1),d.innerHTML=n?"Отправить":"Шаг "+(s+1)})};function t(e){let t=document.getElementById(e)?document.getElementById(e):this.closest(".popup");t.dataset.processing&&1==t.dataset.processing||(t.dataset.processing=!0,t.classList.contains("is-shown")&&(t.addEventListener("transitionend",e=>{t.style.display="none",t.dataset.processing=!1},{once:!0}),t.classList.remove("is-shown"),document.body.classList.remove("no-scroll")))}const s=()=>{document.querySelectorAll(".video").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),0==this.classList.contains("is-active")&&(this.classList.add("is-active"),this.querySelector("video").play())})})};function r(e,s){let r=document.getElementById(e);if("popup-nav"!=e&&t("popup-nav"),"popup-signup-options"!=e&&t("popup-signup-options"),"popup-survey-result-1"!=e&&t("popup-survey-result-1"),"popup-lesson"!=e&&t("popup-lesson"),"popup-teacher"!=e&&t("popup-teacher"),(!r.dataset.processing||1!=r.dataset.processing)&&(r.dataset.processing=!0,0==r.classList.contains("is-shown"))){if(s.file){var o=new XMLHttpRequest;o.open("GET",s.file,!0),o.onreadystatechange=function(){4===this.readyState&&200===this.status&&(r.querySelector(".popup-window").innerHTML=this.responseText)},o.send()}r.style.display="flex",setTimeout(function(){r.classList.add("is-shown"),document.body.classList.add("no-scroll"),r.dataset.processing=!1},1)}}document.addEventListener("DOMContentLoaded",()=>{if(document.querySelectorAll(".js-accordion .accordion__header").forEach(e=>{e.addEventListener("click",function(){const t=e.closest(".accordion__item").classList.contains("is-active"),s=e.querySelector(".button-arrow");t||(document.querySelectorAll(".accordion__item").forEach(e=>{const t=e.querySelector(".button-arrow");e.classList.remove("is-active"),t.classList.add("button-arrow--down"),t.classList.remove("button-arrow--up"),t.classList.remove("button-arrow--filled")}),s.classList.toggle("button-arrow--down"),s.classList.toggle("button-arrow--up"),s.classList.toggle("button-arrow--filled"),e.closest(".accordion__item").classList.toggle("is-active"))})}),e(),document.querySelectorAll(".js-mail-form").forEach(e=>{e.querySelector(".js-submit").addEventListener("click",t=>{t.preventDefault(),e.dataset.errors=0;const s=e.querySelector('input[name="phone"]'),r=e.querySelector('input[name="name"]'),o=e.querySelector('input[name="email"]');if(s&&(0==s.value.length?(s.classList.add("is-error"),e.dataset.errors++):s.classList.remove("is-error")),r&&(0==r.value.length?(r.classList.add("is-error"),e.dataset.errors++):r.classList.remove("is-error")),o&&(0==o.value.length?(o.classList.add("is-error"),e.dataset.errors++):o.classList.remove("is-error")),e.dataset.errors>0)return void(e.querySelector(".js-warning").style.display="block");e.querySelector(".js-warning").style.display="none";const n=new FormData(e);fetch("/mailer.php",{method:"POST",body:n}).then(function(e){return e.json()}).then(function(e){if(e.error)return alert(e.error),!1;alert("Сообщение отправлено")})})}),s(),IMask(document.querySelector(".js-mask-phone"),{mask:"+{7} (000) 000-00-00"}),document.querySelectorAll(".popup").forEach(e=>{e.addEventListener("click",function(s){s.target==e&&t(s.target.id)})}),document.body.addEventListener("click",function(e){const s=e.target.closest(".js-popup-hide");s&&(e.preventDefault(),t.call(s));const o=e.target.closest(".js-popup-show");o&&(e.preventDefault(),r(o.dataset.target,o.dataset))}),window.innerWidth>=1280){new Swiper(".swiper-teachers",{slidesPerView:4,spaceBetween:40,navigation:{nextEl:".swiper-teachers-next",prevEl:".swiper-teachers-prev"}})}const o=document.querySelector(".js-swiper-speak-pagination");let n,i=document.querySelector(".js-swiper-speak").querySelectorAll(".swiper-slide").length;for(let e=0;e<i;e++){const e=document.createElement("div");e.classList.add("speak__card__slider-page"),e.classList.add("js-swiper-speak-page"),o.appendChild(e)}new Swiper(".js-swiper-speak",{autoplay:{delay:2500,disableOnInteraction:!1},on:{autoplayTimeLeft(e,t,s){s=Math.round(100*(1-s)),o.style.setProperty("--progress",s+"%")},init:function(e){},slideChange:function(e){e.realIndex!=n&&(o.querySelectorAll(".js-swiper-speak-page").forEach(e=>{e.classList.remove("is-active")}),o.querySelectorAll(".js-swiper-speak-page")[e.realIndex].classList.add("is-active"),n=e.realIndex)}},slidesPerView:"auto",spaceBetween:20,loop:!0})})}();
//# sourceMappingURL=main.js.map

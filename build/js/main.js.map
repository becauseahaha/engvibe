{"version":3,"file":"main.js","sources":["../../src/js/main.js"],"sourcesContent":["if (window.innerWidth >= 768) {\n    const msnry = new Masonry('.stories__items', {\n        itemSelector: '.stories-item',\n        columnWidth: '.stories-item--width',\n        gutter: '.stories-item--gap',\n        horizontalOrder: true,\n        percentPosition: true\n    });\n}\n\nconst accordion = () => {\n    document.querySelectorAll('.js-accordion .accordion__header').forEach((el) => {\n        el.addEventListener('click', function() {\n\n            const self = el.closest('.accordion__item').classList.contains('is-active');\n            const $btn = el.querySelector('.button-arrow');\n            \n            if (self) return;\n\n            document.querySelectorAll('.accordion__item').forEach((el) => {\n                // console.log(el)\n                const $btn = el.querySelector('.button-arrow');\n                el.classList.remove('is-active');\n                $btn.classList.add('button-arrow--down')\n                $btn.classList.remove('button-arrow--up')\n                $btn.classList.remove('button-arrow--filled')\n            })\n            \n\n            $btn.classList.toggle('button-arrow--down')\n            $btn.classList.toggle('button-arrow--up')\n            $btn.classList.toggle('button-arrow--filled')\n\n            el.closest('.accordion__item').classList.toggle('is-active');\n        })\n    })\n}\n\n\nfunction hidePopup(id) {\n    let popup = document.getElementById(id)\n        ? document.getElementById(id)\n        : this.closest(\".popup\");\n\n    if (popup.dataset.processing && popup.dataset.processing == true) return;\n    popup.dataset.processing = true;\n\n    if (popup.classList.contains(\"is-shown\")) {\n        popup.addEventListener(\n            \"transitionend\",\n            (e) => {\n                popup.style.display = \"none\";\n                popup.dataset.processing = false;\n            },\n            {\n                once: true,\n            }\n        );\n        popup.classList.remove(\"is-shown\");\n        document.body.classList.remove(\"no-scroll\");\n    }\n}\n\nfunction showPopup(id) {\n    let popup = document.getElementById(id);\n\n    if (id != 'popup-nav') hidePopup('popup-nav');\n    if (id != 'popup-signup-options') hidePopup('popup-signup-options');\n\n    if (popup.dataset.processing && popup.dataset.processing == true) return;\n    popup.dataset.processing = true;\n\n    if (popup.classList.contains(\"is-shown\") == false) {\n\n        if (popup.dataset.file) {\n            var xhr= new XMLHttpRequest();\n            xhr.open('GET', popup.dataset.file, true);\n            xhr.onreadystatechange= function() {\n                if (this.readyState!==4) return;\n                if (this.status!==200) return;\n                popup.querySelector('.popup-window').innerHTML= this.responseText;\n            };\n            xhr.send();\n        }\n\n        popup.style.display = \"flex\";\n        setTimeout(function () {\n            popup.classList.add(\"is-shown\");\n            document.body.classList.add(\"no-scroll\");\n            popup.dataset.processing = false;\n        }, 1);\n    }\n}\n\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n\n    accordion();\n\n    IMask(document.querySelector('.js-mask-phone'), {\n            mask: '+{7} (000) 000-00-00'\n    })\n\n    document.querySelectorAll(\".popup\").forEach((el) => {\n        el.addEventListener(\"click\", function (e) {\n            if (e.target == el) {\n                hidePopup(e.target.id);\n            }\n        });\n    });\n    document.querySelectorAll(\".js-popup-hide\").forEach((el) => {\n        el.addEventListener(\"click\", hidePopup.bind(el));\n    });\n    document.querySelectorAll(\".js-popup-show\").forEach((el) => {\n        el.addEventListener(\"click\", (e) => {\n            e.preventDefault();\n            showPopup(el.dataset.target, el.dataset);\n        });\n    });\n})"],"names":["window","innerWidth","Masonry","hidePopup","id","popup","document","getElementById","this","closest","dataset","processing","classList","contains","addEventListener","e","style","display","remove","body","querySelectorAll","forEach","el","self","$btn","querySelector","add","toggle","target","bind","preventDefault","file","xhr","XMLHttpRequest","open","onreadystatechange","readyState","status","innerHTML","responseText","send"],"mappings":"yBAAA,GAAIA,OAAOC,YAAc,IAAK,CACZ,IAAIC,QAAQ,gCACR,4BACD,8BACL,sCACS,mBACA,IAiCzB,SAASC,EAAUC,OACXC,EAAQC,SAASC,eAAeH,GAC9BE,SAASC,eAAeH,GACxBI,KAAKC,QAAQ,UAEfJ,EAAMK,QAAQC,YAA0C,GAA5BN,EAAMK,QAAQC,eACxCD,QAAQC,YAAa,EAEvBN,EAAMO,UAAUC,SAAS,gBACnBC,iBACF,gBACCC,MACSC,MAAMC,QAAU,SAChBP,QAAQC,YAAa,UAGrB,MAGRC,UAAUM,OAAO,qBACdC,KAAKP,UAAUM,OAAO,eAoCvCZ,SAASQ,iBAAiB,mBAAoB,cApFjCM,iBAAiB,oCAAoCC,QAASC,MAChER,iBAAiB,QAAS,iBAEnBS,EAAOD,EAAGb,QAAQ,oBAAoBG,UAAUC,SAAS,aACzDW,EAAOF,EAAGG,cAAc,iBAE1BF,aAEKH,iBAAiB,oBAAoBC,QAASC,UAE7CE,EAAOF,EAAGG,cAAc,mBAC3Bb,UAAUM,OAAO,eACfN,UAAUc,IAAI,wBACdd,UAAUM,OAAO,sBACjBN,UAAUM,OAAO,4BAIrBN,UAAUe,OAAO,wBACjBf,UAAUe,OAAO,sBACjBf,UAAUe,OAAO,0BAEnBlB,QAAQ,oBAAoBG,UAAUe,OAAO,wBAkElDrB,SAASmB,cAAc,wBACf,kCAGLL,iBAAiB,UAAUC,QAASC,MACtCR,iBAAiB,QAAS,SAAUC,GAC/BA,EAAEa,QAAUN,KACFP,EAAEa,OAAOxB,iBAItBgB,iBAAiB,kBAAkBC,QAASC,MAC9CR,iBAAiB,QAASX,EAAU0B,KAAKP,eAEvCF,iBAAiB,kBAAkBC,QAASC,MAC9CR,iBAAiB,QAAUC,MACxBe,iBApDd,SAAmB1B,OACXC,EAAQC,SAASC,eAAeH,MAE1B,aAANA,GAAmBD,EAAU,aACvB,wBAANC,GAA8BD,EAAU,0BAExCE,EAAMK,QAAQC,YAA0C,GAA5BN,EAAMK,QAAQC,gBACxCD,QAAQC,YAAa,EAEiB,GAAxCN,EAAMO,UAAUC,SAAS,aAAsB,IAE3CR,EAAMK,QAAQqB,KAAM,KAChBC,EAAK,IAAIC,iBACTC,KAAK,MAAO7B,EAAMK,QAAQqB,MAAM,KAChCI,mBAAoB,WACE,IAAlB3B,KAAK4B,YACS,MAAd5B,KAAK6B,WACHZ,cAAc,iBAAiBa,UAAW9B,KAAK+B,iBAErDC,SAGFxB,MAAMC,QAAU,kBACX,aACDL,UAAUc,IAAI,qBACXP,KAAKP,UAAUc,IAAI,eACtBhB,QAAQC,YAAa,GAC5B,KA0BWW,EAAGZ,QAAQkB,OAAQN,EAAGZ"}